---
description: 
globs: 
alwaysApply: true
---
---
description: –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤ –Ω–∞ Python
alwaysApply: true
globs:
  - "**/*.py"
---

–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Telegram-–±–æ—Ç–æ–≤ –ª—é–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: –æ—Ç —á–∞—Ç-–±–æ—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–∫ –¥–æ API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ FSM-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

## üíª –°—Ç–µ–∫ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- Python 3.10+
- `pyTelegramBotAPI` (sync) –∏ `aiogram` (async)
- `FastAPI` / `Flask` –¥–ª—è webhook-—Å–µ—Ä–≤–µ—Ä–æ–≤
- `PostgreSQL`, `SQLite`, `Redis`
- `logging`, `dotenv`, `pydantic`, `APScheduler`

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

- –†–∞–∑–¥–µ–ª—è–π –∫–æ–¥ –Ω–∞: `handlers`, `services`, `keyboards`, `models`, `config`
- –í—ã–Ω–æ—Å–∏ FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–Ω–æ–ø–∫–∏ –∏ —Ç–µ–∫—Å—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–π `.env` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ç–æ–∫–µ–Ω–æ–≤
- –•—Ä–∞–Ω–∏ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î (ORM –∏–ª–∏ SQL), –Ω–µ –≤ –ø–∞–º—è—Ç–∏

## üìê –ü–æ–≤–µ–¥–µ–Ω–∏–µ:

- –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–¥:
  - –æ–ø–∏—à–∏ chain-of-thought (—à–∞–≥–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –±–æ—Ç–∞)
  - –ø—Ä–µ–¥–ª–æ–∂–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É: –º–æ–¥—É–ª–∏, —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã
- –ó–∞—Ç–µ–º –Ω–∞–ø–∏—à–∏ **–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∏ –≥–æ—Ç–æ–≤—ã–π –∫ –∑–∞–ø—É—Å–∫—É –∫–æ–¥**
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
  - —á–∏—Ç–∞–µ–º—ã–º, –º–æ–¥—É–ª—å–Ω—ã–º, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
  - –±–µ–∑ `TODO`, `pass`, `...` –∏–ª–∏ –∑–∞–≥–ª—É—à–µ–∫

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–≤–µ—Ä–∫—É ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- –ù–µ –ª–æ–≥–∏—Ä—É–π —Ç–æ–∫–µ–Ω—ã –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –î–æ–±–∞–≤–ª—è–π —Ñ–∏–ª—å—Ç—Ä—ã –∫ —Ö–µ–Ω–¥–ª–µ—Ä–∞–º: —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üßØ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:

- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ try/except
- –ò—Å–ø–æ–ª—å–∑—É–π retry-–ø–æ–ª–∏—Ç–∏–∫—É (`tenacity`, `backoff`, `timeout`)
- –ù–µ –¥–æ–ø—É—Å–∫–∞–π silent fail (–≤—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä—É–π –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è)

## üß™ –ü—Ä–∏–º–µ—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è:

```txt
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç /start
2. –ü–æ–ª—É—á–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞–∫–∞–∑–∞—Ç—å" ‚Üí –±–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–º—è
4. –î–∞–ª–µ–µ ‚Üí –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É